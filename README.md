# æ™ºèƒ½å®¢æœç³»ç»Ÿ - Work ç³»åˆ—

åŸºäº LangChain + LangGraph + FastAPI æ„å»ºçš„ä¼ä¸šçº§æ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œæ”¯æŒå¤šç§Ÿæˆ·ã€RAG çŸ¥è¯†åº“æ£€ç´¢ã€è®¢å•æŸ¥è¯¢ã€å¤š Agent åä½œç­‰åŠŸèƒ½ã€‚

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[ç‰ˆæœ¬æ¼”è¿›å†å²](./VERSION_HISTORY.md)** - äº†è§£ V1/V2/V3 çš„åŠŸèƒ½å·®å¼‚å’Œé€‰æ‹©å»ºè®®
- **[å¿«é€Ÿå¯åŠ¨æŒ‡å—](./QUICKSTART.md)** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- **[Work V3 å®Œæ•´æ–‡æ¡£](./work_v3/README.md)** - æœ€æ–°ç‰ˆæœ¬è¯¦ç»†æ–‡æ¡£
- **[æ„å›¾è¯†åˆ«æŠ€æœ¯æ–‡æ¡£](./work_v3/docs/intent-recognition.md)** - æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.9+
- Node.js 16+
- DashScope API Key

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨è V3ï¼‰

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
echo "DASHSCOPE_API_KEY=your_key_here" > .env

# 2. å®‰è£…ä¾èµ–
make install

# 3. å¯åŠ¨æœåŠ¡
./start.sh
```

æœåŠ¡å¯åŠ¨åï¼š
- å‰ç«¯ï¼šhttp://localhost:5173
- åç«¯ï¼šhttp://localhost:8000
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | V1 åŸºç¡€ç‰ˆ | V2 å¢å¼ºç‰ˆ | V3 ä¼ä¸šç‰ˆ |
|-----|----------|----------|----------|
| æ„å›¾è¯†åˆ« | âœ… | âœ… | âœ… |
| RAG çŸ¥è¯†åº“ | âœ… | âœ… | âœ… |
| è®¢å•æŸ¥è¯¢ | âœ… | âœ… | âœ… |
| å¤šæ¨¡æ€æ”¯æŒ | âŒ | âœ… | âœ… |
| å»ºè®®é—®é¢˜ç”Ÿæˆ | âŒ | âœ… | âœ… |
| å‘é‡ç®¡ç† API | âŒ | âœ… | âœ… |
| æ¨¡å‹åˆ‡æ¢ | âŒ | âœ… | âœ… |
| æ€§èƒ½ç›‘æ§ | âŒ | âœ… | âœ… |
| **å¤šç§Ÿæˆ·æ”¯æŒ** | âŒ | âŒ | âœ… |
| **ç§Ÿæˆ·éš”ç¦»** | âŒ | âŒ | âœ… |
| **CORS æ”¯æŒ** | âŒ | âŒ | âœ… |
| React å‰ç«¯ | âŒ | âŒ | âœ… |

è¯¦ç»†å¯¹æ¯”è¯·æŸ¥çœ‹ [ç‰ˆæœ¬æ¼”è¿›å†å²](./VERSION_HISTORY.md)

## ğŸ¯ é€‰æ‹©å»ºè®®

### é€‰æ‹© V1 å¦‚æœä½ ï¼š
- å¿«é€ŸåŸå‹éªŒè¯
- å­¦ä¹  LangChain/LangGraph
- å•ç§Ÿæˆ·å°è§„æ¨¡åº”ç”¨

### é€‰æ‹© V2 å¦‚æœä½ ï¼š
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- éœ€è¦å¤šæ¨¡æ€æ”¯æŒ
- éœ€è¦æ€§èƒ½ç›‘æ§å’Œå¤‡ä»½
- å•ç§Ÿæˆ·ä¸­å¤§è§„æ¨¡åº”ç”¨

### é€‰æ‹© V3 å¦‚æœä½ ï¼šâ­ æ¨è
- ä¼ä¸šçº§åº”ç”¨
- å¤šç§Ÿæˆ· SaaS å¹³å°
- éœ€è¦æ•°æ®éš”ç¦»
- å‰åç«¯åˆ†ç¦»æ¶æ„
- å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React å‰ç«¯  â”‚ (V3)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FastAPI åç«¯æœåŠ¡             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   LangGraph çŠ¶æ€æœºå¼•æ“       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ Intent â”‚â†’ â”‚   KB   â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Router â”‚  â”‚ Search â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ Order  â”‚  â”‚ Direct â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Query  â”‚  â”‚ Answer â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  FAISS   â”‚  â”‚ SQLite   â”‚       â”‚
â”‚  â”‚ å‘é‡ç´¢å¼•  â”‚  â”‚ è®¢å•æ•°æ®åº“â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DashScope API  â”‚ (é€šä¹‰åƒé—®)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½æ„å›¾è¯†åˆ«
- åŒå±‚è¯†åˆ«ç­–ç•¥ï¼ˆå…³é”®è¯ + LLMï¼‰
- 6 ç§æ„å›¾ç±»å‹ï¼šcourseã€presaleã€postsaleã€orderã€humanã€direct
- è¯†åˆ«å‡†ç¡®ç‡ > 95%

### 2. RAG çŸ¥è¯†åº“æ£€ç´¢
- FAISS å‘é‡ç´¢å¼•
- è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- è‡ªåŠ¨å¼•ç”¨æ¥æº

### 3. è®¢å•æŸ¥è¯¢
- SQL è‡ªåŠ¨ç”Ÿæˆ
- å‚æ•°åŒ–æŸ¥è¯¢é˜²æ³¨å…¥
- è‡ªç„¶è¯­è¨€è¯æœ¯ç”Ÿæˆ

### 4. å¤šæ¨¡æ€æ”¯æŒï¼ˆV2+ï¼‰
- å›¾åƒç†è§£
- è¯­éŸ³è¯†åˆ«
- å›¾æ–‡æ··åˆå¯¹è¯

### 5. å¤šç§Ÿæˆ·æ”¯æŒï¼ˆV3ï¼‰
- ç‹¬ç«‹çŸ¥è¯†åº“
- ç‹¬ç«‹è®¢å•æ•°æ®åº“
- ç§Ÿæˆ·éš”ç¦»
- è¯¾ç¨‹-ç§Ÿæˆ·æ˜ å°„

### 6. æ€§èƒ½ç›‘æ§ï¼ˆV2+ï¼‰
- è¯·æ±‚é“¾è·¯è¿½è¸ª
- æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡
- ç»“æ„åŒ–æ—¥å¿—

## ğŸ“¡ API ç¤ºä¾‹

### åŸºç¡€å¯¹è¯
```bash
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"query":"è¿™é—¨è¯¾ç¨‹é€‚åˆé›¶åŸºç¡€å—ï¼Ÿ","user_id":"user123"}'
```

### è®¢å•æŸ¥è¯¢
```bash
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"query":"æŸ¥è¯¢è®¢å• #20251114001"}'
```

### å¤šç§Ÿæˆ·è¯·æ±‚ï¼ˆV3ï¼‰
```bash
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -H "X-Tenant-ID: t1" \
  -d '{"query":"è¯¾ç¨‹å’¨è¯¢"}'
```

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8000/health
```

æ›´å¤š API ç¤ºä¾‹è¯·æŸ¥çœ‹ [API æµ‹è¯•æ–‡æ¡£](./README)

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - Web æ¡†æ¶
- **LangChain** - LLM åº”ç”¨æ¡†æ¶
- **LangGraph** - çŠ¶æ€æœºç¼–æ’
- **FAISS** - å‘é‡æ£€ç´¢
- **SQLite** - è®¢å•æ•°æ®åº“
- **Redis** - ä¼šè¯å­˜å‚¨ï¼ˆå¯é€‰ï¼‰
- **DashScope** - é€šä¹‰åƒé—® API

### å‰ç«¯ï¼ˆV3ï¼‰
- **React** - UI æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·
- **Ant Design** - ç»„ä»¶åº“
- **Axios** - HTTP å®¢æˆ·ç«¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ work_v1/              # V1 åŸºç¡€ç‰ˆ
â”œâ”€â”€ work_v2/              # V2 å¢å¼ºç‰ˆ
â”œâ”€â”€ work_v3/              # V3 ä¼ä¸šç‰ˆï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ app.py           # FastAPI åº”ç”¨
â”‚   â”œâ”€â”€ graph.py         # LangGraph çŠ¶æ€æœº
â”‚   â”œâ”€â”€ config.py        # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ tools.py         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ tenants/         # å¤šç§Ÿæˆ·æ•°æ®
â”‚   â”œâ”€â”€ docs/            # æŠ€æœ¯æ–‡æ¡£
â”‚   â””â”€â”€ README.md        # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ frontend/            # React å‰ç«¯
â”œâ”€â”€ mobile/              # ç§»åŠ¨ç«¯ï¼ˆè§„åˆ’ä¸­ï¼‰
â”œâ”€â”€ docs/                # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ Makefile             # æ„å»ºè„šæœ¬
â”œâ”€â”€ start.sh             # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop.sh              # åœæ­¢è„šæœ¬
â”œâ”€â”€ VERSION_HISTORY.md   # ç‰ˆæœ¬æ¼”è¿›å†å²
â””â”€â”€ QUICKSTART.md        # å¿«é€Ÿå¯åŠ¨æŒ‡å—
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make help

# å®‰è£…ä¾èµ–
make install

# æ„å»ºç´¢å¼•
make build-index

# å¯åŠ¨æœåŠ¡
make start
# æˆ–
./start.sh

# åœæ­¢æœåŠ¡
make stop
# æˆ–
./stop.sh

# æŸ¥çœ‹çŠ¶æ€
make status

# æŸ¥çœ‹æ—¥å¿—
make logs

# æµ‹è¯• API
make test

# æ¸…ç†ç¼“å­˜
make clean
```

## ğŸ“š å­¦ä¹ è·¯å¾„

### æ–°æ‰‹å…¥é—¨
1. é˜…è¯» [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./QUICKSTART.md)
2. äº†è§£ [ç‰ˆæœ¬æ¼”è¿›å†å²](./VERSION_HISTORY.md)
3. å¯åŠ¨ V3 å¹¶æµ‹è¯•åŸºç¡€åŠŸèƒ½
4. é˜…è¯» [æ„å›¾è¯†åˆ«æŠ€æœ¯æ–‡æ¡£](./work_v3/docs/intent-recognition.md)

### å¼€å‘è€…
1. é˜…è¯» [Work V3 å®Œæ•´æ–‡æ¡£](./work_v3/README.md)
2. äº†è§£é¡¹ç›®ç»“æ„å’Œä»£ç ç»„ç»‡
3. å­¦ä¹  LangGraph çŠ¶æ€æœºè®¾è®¡
4. å‚è€ƒ API æ–‡æ¡£è¿›è¡Œé›†æˆ

### è¿ç»´äººå‘˜
1. äº†è§£éƒ¨ç½²æ¶æ„
2. é…ç½®å¤šç§Ÿæˆ·ç¯å¢ƒ
3. è®¾ç½®ç›‘æ§å’Œæ—¥å¿—
4. å­¦ä¹ æ•…éšœæ’æŸ¥æ–¹æ³•

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: æœåŠ¡æ— æ³•å¯åŠ¨ï¼Ÿ**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8000
lsof -i :5173

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/backend.log
```

**Q: FAISS ç´¢å¼•åŠ è½½å¤±è´¥ï¼Ÿ**
```bash
# é‡æ–°æ„å»ºç´¢å¼•
make build-index
```

**Q: API Key æœªé…ç½®ï¼Ÿ**
```bash
# æ£€æŸ¥ .env æ–‡ä»¶
cat .env
# ç¡®ä¿åŒ…å« DASHSCOPE_API_KEY
```

æ›´å¤šé—®é¢˜è¯·æŸ¥çœ‹ [Work V3 æ•…éšœæ’æŸ¥](./work_v3/README.md#æ•…éšœæ’æŸ¥)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤ä»£ç 
4. å‘èµ· Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª PEP 8
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [LangChain æ–‡æ¡£](https://python.langchain.com/)
- [LangGraph æ–‡æ¡£](https://langchain-ai.github.io/langgraph/)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [é€šä¹‰åƒé—® API](https://help.aliyun.com/zh/dashscope/)

### å­¦ä¹ èµ„æº
- [LangChain æ•™ç¨‹](https://python.langchain.com/docs/tutorials/)
- [LangGraph ç¤ºä¾‹](https://github.com/langchain-ai/langgraph/tree/main/examples)

## ğŸ“ è”ç³»æˆ‘ä»¬

- æäº¤ Issueï¼š[GitHub Issues](https://github.com/your-repo/issues)
- æŠ€æœ¯è®¨è®ºï¼š[GitHub Discussions](https://github.com/your-repo/discussions)

---

**ç»´æŠ¤å›¢é˜Ÿï¼š** AI Team  
**æœ€åæ›´æ–°ï¼š** 2025-11-27  
**å½“å‰ç‰ˆæœ¬ï¼š** V3.0
